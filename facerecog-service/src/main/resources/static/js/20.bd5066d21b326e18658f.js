webpackJsonp([20],{"3mzd":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l={name:"Attend",data:function(){return{tableData:[],currentPage:1,pageSizes:[5,10,20],pageSize:10,total:0,model:{date_range:["2019-01-01","2019-12-31"],am_attend_time:"09:00",pm_attend_time:"18:00",am_time_range:["00:00","11:59"],pm_time_range:["12:00","23:59"]},selectGroupModel:"",group_list:""}},methods:{handleChange:function(e){this.queryAttend()},queryAttend:function(){var e=this,t=this.$refs.form.model;this.$post("/attend/attend_list",{pageNum:this.currentPage,pageSize:this.pageSize,date_start:t.date_range[0],date_end:t.date_range[1],am_attend_time:t.am_attend_time,pm_attend_time:t.pm_attend_time,group_id:this.selectGroupModel,am_time_start:t.am_time_range[0],am_time_end:t.am_time_range[1],pm_time_start:t.pm_time_range[0],pm_time_end:t.pm_time_range[1]}).then(function(t){e.total=t.data.total,e.tableData=t.data.list})},exportExcel:function(){var e=this.$refs.form.model;window.open(this.$axios.defaults.baseURL+"/attend/export?"+this.$qs.stringify({date_start:e.date_range[0],date_end:e.date_range[1],am_attend_time:e.am_attend_time,pm_attend_time:e.pm_attend_time,group_id:this.selectGroupModel,am_time_start:e.am_time_range[0],am_time_end:e.am_time_range[1],pm_time_start:e.pm_time_range[0],pm_time_end:e.pm_time_range[1]}))}},created:function(){var e=this;this.$get("/group/list").then(function(t){e.group_list=t.data.list})}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-main",[a("el-breadcrumb",{staticStyle:{"margin-bottom":"15px"},attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("考勤管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("考勤详情")])],1),e._v(" "),a("div",{staticStyle:{float:"left"}},[a("el-form",{ref:"form",attrs:{"label-width":"100px",size:"small",model:e.model}},[a("el-form-item",{attrs:{label:"选择日期"}},[a("el-date-picker",{staticClass:"date_picker_pass_number",attrs:{"unlink-panels":"",type:"daterange","range-separator":"至","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.model.date_range,callback:function(t){e.$set(e.model,"date_range",t)},expression:"model.date_range"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"上下班时间:"}},[[a("el-time-picker",{staticClass:"attend_time_picker",attrs:{"value-format":"HH:mm",format:"HH:mm",placeholder:"上班时间"},model:{value:e.model.am_attend_time,callback:function(t){e.$set(e.model,"am_attend_time",t)},expression:"model.am_attend_time"}}),e._v(" "),a("el-time-picker",{staticClass:"attend_time_picker",attrs:{"value-format":"HH:mm",format:"HH:mm",placeholder:"下班时间"},model:{value:e.model.pm_attend_time,callback:function(t){e.$set(e.model,"pm_attend_time",t)},expression:"model.pm_attend_time"}})]],2),e._v(" "),a("el-form-item",{attrs:{label:"上班打卡范围:",prop:"am_time_range"}},[a("el-time-picker",{attrs:{"is-range":"","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围","value-format":"HH:mm",format:"HH:mm"},model:{value:e.model.am_time_range,callback:function(t){e.$set(e.model,"am_time_range",t)},expression:"model.am_time_range"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"下班打卡范围:",prop:"pm_time_range"}},[a("el-time-picker",{attrs:{"is-range":"","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围","value-format":"HH:mm",format:"HH:mm"},model:{value:e.model.pm_time_range,callback:function(t){e.$set(e.model,"pm_time_range",t)},expression:"model.pm_time_range"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"请选择部门:"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择部门",size:"small"},model:{value:e.selectGroupModel,callback:function(t){e.selectGroupModel=t},expression:"selectGroupModel"}},e._l(e.group_list,function(e){return a("el-option",{key:e.group_id,attrs:{label:e.group_name,value:e.group_id}})}),1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"warning",size:"small"},on:{click:e.queryAttend}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{type:"success",size:"small"},on:{click:e.exportExcel}},[e._v("导出excel")])],1)],1)],1),e._v(" "),a("div",{staticStyle:{float:"left",width:"calc(100% - 380px)","margin-left":"20px"}},[[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"日期","min-width":"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatDate")(t.row.record_time)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"person_name",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"device_name",label:"设备名"}}),e._v(" "),a("el-table-column",{attrs:{label:"上班打卡时间","min-width":"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatDate")(t.row.am_punch_time)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"上班状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.am_punch_status?a("el-tag",{attrs:{type:"info","disable-transitions":""}},[e._v("正常\n            ")]):e._e(),e._v(" "),1===t.row.am_punch_status?a("el-tag",{attrs:{type:"warning","disable-transitions":""}},[e._v("迟到\n            ")]):e._e(),e._v(" "),2===t.row.am_punch_status?a("el-tag",{attrs:{type:"warning","disable-transitions":""}},[e._v("早退\n            ")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"下班打卡时间","min-width":"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatDate")(t.row.pm_punch_time)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"下班状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.pm_punch_status?a("el-tag",{attrs:{type:"success","disable-transitions":""}},[e._v("正常\n            ")]):e._e(),e._v(" "),1===t.row.pm_punch_status?a("el-tag",{attrs:{type:"warning","disable-transitions":""}},[e._v("迟到\n            ")]):e._e(),e._v(" "),2===t.row.pm_punch_status?a("el-tag",{attrs:{type:"warning","disable-transitions":""}},[e._v("早退\n            ")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"group_name",label:"组名"}})],1)],e._v(" "),[a("div",{staticClass:"block",staticStyle:{"text-align":"center"}},[a("el-pagination",{ref:"pagination",attrs:{"current-page":e.currentPage,"page-size":e.pageSize,"page-sizes":e.pageSizes,"prev-text":"上一页","next-text":"下一页",layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleChange,"current-change":e.handleChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t}}})],1)]],2)],1)},staticRenderFns:[]};var n=a("VU/8")(l,r,!1,function(e){a("hx87")},"data-v-42a10a80",null);t.default=n.exports},hx87:function(e,t){}});