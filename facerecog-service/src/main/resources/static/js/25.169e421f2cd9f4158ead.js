webpackJsonp([25],{mbTL:function(e,t){},o9va:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("yyct"),n={name:"Record",data:function(){return{tableData:[],searching:!0,currentPage:1,pageSizes:[5,10,20],pageSize:5,total:0,keyword:"",multipleSelection:[],device_list:"",device_id:"",selectDeviceModel:""}},methods:{handleChange:function(e){this.get()},searchRecordList:function(){this.get({pageNum:1,pageSize:this.pageSize,device_id:this.device_id,keyword:this.keyword})},handleSelectionChange:function(e){this.multipleSelection=e},deleteRecords:function(){var e=this;if(0!==this.multipleSelection.length){var t=[];this.multipleSelection.forEach(function(e){return t.push(e.record_id)});var a=t.join(",");i.a.confirm("确定删除勾选记录").then(function(){e.$post("/record/deleteLists",{record_ids:a}).then(function(t){e.$message.success(t.message),e.get()})})}else this.$message.warning("请勾选待删除记录")},clearRecord:function(){var e=this;i.a.confirm("警告! 该操作将删除所有记录，是否继续？").then(function(){e.$post("/record/clear",{device_id:e.device_id}).then(function(t){e.$message.success(t.message),e.tableData=[],e.total=0})})},deleteRecordById:function(e){var t=this;i.a.confirm("确定删除该记录").then(function(){t.$post("/record/delete",{record_id:e.row.record_id}).then(function(a){t.$message.success(a.message),t.$utils.arrayRemoveObj(t.tableData,e.row),t.total--})})},changeSelectDevice:function(e){this.device_id=e,this.get({pageNum:1,pageSize:this.pageSize,device_id:this.device_id,keyword:this.keyword})},getDeviceList:function(){var e=this;this.$get("/device/list").then(function(t){e.device_list=t.data.list})},get:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{pageNum:this.currentPage,pageSize:this.pageSize,device_id:this.device_id,keyword:this.keyword};this.$get("/record/list_base64",t).then(function(t){e.tableData=t.data.list,e.total=t.data.total})}},created:function(){this.get(),this.getDeviceList()}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-main",[a("el-breadcrumb",{staticStyle:{"margin-bottom":"15px"},attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("记录管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("记录列表")])],1),e._v(" "),a("el-form",{attrs:{onsubmit:"return false;"}},[a("el-form-item",[a("el-row",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.deleteRecords}},[e._v("批量删除\n        ")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:e.clearRecord}},[e._v("清空记录")]),e._v(" "),a("el-select",{attrs:{clearable:"",placeholder:"请选择设备",size:"small"},on:{change:e.changeSelectDevice},model:{value:e.selectDeviceModel,callback:function(t){e.selectDeviceModel=t},expression:"selectDeviceModel"}},e._l(e.device_list,function(e){return a("el-option",{key:e.device_id,attrs:{label:e.device_name,value:e.device_id}})}),1),e._v(" "),a("div",{staticStyle:{float:"right"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{size:"small",placeholder:"请输入搜索内容"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchRecordList(t)}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.searchRecordList}})],1)],1)],1)],1),e._v(" "),[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{prop:"record_id",label:"记录ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"person_name",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"device_name",label:"设备名"}}),e._v(" "),a("el-table-column",{attrs:{label:"识别模式"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.recog_type?a("span",[e._v("人脸")]):e._e(),e._v(" "),1==t.row.recog_type?a("span",[e._v("身份证")]):e._e(),e._v(" "),2==t.row.recog_type?a("span",[e._v("工号")]):e._e(),e._v(" "),3==t.row.recog_type?a("span",[e._v("人脸+身份证")]):e._e(),e._v(" "),4==t.row.recog_type?a("span",[e._v("人脸+工号")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"识别时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-time"}),e._v(" "),a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(e._f("formatDate")(t.row.record_time)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"识别图片"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticClass:"image_tbl",attrs:{src:"data:image/jpeg;base64,"+e.row.base_image}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return e.deleteRecordById(t)}}},[e._v("删除")])]}}])})],1)],e._v(" "),[a("div",{staticClass:"block"},[a("el-pagination",{ref:"pagination",attrs:{"current-page":e.currentPage,"page-size":e.pageSize,"page-sizes":e.pageSizes,"prev-text":"上一页","next-text":"下一页",layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleChange,"current-change":e.handleChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t}}})],1)]],2)},staticRenderFns:[]};var r=a("VU/8")(n,l,!1,function(e){a("mbTL")},"data-v-23c543da",null);t.default=r.exports}});